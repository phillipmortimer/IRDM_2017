import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt
import numpy as np
import os
import inspect
import numpy as np

# Learning curve plots for RankLib

iters =  np.linspace(0,250,26)
iters[0] = 1
# len(iters) = 26
# array([   1.,   10.,   20.,   30.,   40.,   50.,   60.,   70.,   80.,
        #  90.,  100.,  110.,  120.,  130.,  140.,  150.,  160.,  170.,
        # 180.,  190.,  200.,  210.,  220.,  230.,  240.,  250.])

tc64_lr01_l1 = [0.2947, 0.3098, 0.3098, 0.3098, 0.3146, 0.3146, 0.3156, 0.3156,
                0.3159, 0.3159, 0.3159, 0.3159, 0.3159, 0.3159, 0.3159, 0.3159,
                0.3159, 0.3159, 0.3159, 0.3159, 0.3159, 0.3159, 0.3159, 0.3159,
                0.3159, 0.3131, 0.3131, 0.3131, 0.3135, 0.3364, 0.3329, 0.34  ,
                0.34  , 0.3366, 0.3495, 0.3495, 0.3521, 0.3499, 0.3721, 0.3557,
                0.3721, 0.358 , 0.3607, 0.3755, 0.3607, 0.3738, 0.3752, 0.3772,
                0.3769, 0.3759, 0.3754, 0.3751, 0.3752, 0.376 , 0.3761, 0.376 ,
                0.3762, 0.3761, 0.3885, 0.3889, 0.3884, 0.3884, 0.3883, 0.3885,
                0.3891, 0.3881, 0.3902, 0.3906, 0.3913, 0.391 , 0.3905, 0.39  ,
                0.3912, 0.3905, 0.3921, 0.3924, 0.3935, 0.3947, 0.395 , 0.3948,
                0.3957, 0.3963, 0.3965, 0.3978, 0.3981, 0.3981, 0.3981, 0.3988,
                0.3993, 0.3996, 0.4002, 0.401 , 0.4013, 0.402 , 0.4025, 0.403 ,
                0.4034, 0.4031, 0.4031, 0.4035, 0.4038, 0.4038, 0.4038, 0.4038,
                0.4038, 0.4041, 0.4039, 0.4038, 0.404 , 0.4039, 0.4038, 0.4046,
                0.405 , 0.405 , 0.4061, 0.4064, 0.4064, 0.4063, 0.4069, 0.4074,
                0.4077, 0.4077, 0.4077, 0.4079, 0.4078, 0.4079, 0.4084, 0.4083,
                0.4082, 0.4084, 0.4084, 0.409 , 0.4092, 0.409 , 0.4091, 0.4094,
                0.4095, 0.4098, 0.4099, 0.4103, 0.4103, 0.4103, 0.4104, 0.4104,
                0.4104, 0.4105, 0.4105, 0.4109, 0.4108, 0.411 , 0.4115, 0.4117,
                0.4117, 0.4117, 0.4118, 0.412 , 0.412 , 0.4124, 0.4122, 0.4123,
                0.4124, 0.4126, 0.4128, 0.4128, 0.4128, 0.4123, 0.4128, 0.4127,
                0.4127, 0.4128, 0.4128, 0.413 , 0.4131, 0.4133, 0.4134, 0.4131,
                0.4134, 0.4136, 0.4138, 0.4136, 0.4136, 0.4139, 0.4138, 0.414 ,
                0.4141, 0.4141, 0.4141, 0.414 , 0.4139, 0.4146, 0.4148, 0.4147,
                0.4147, 0.4147, 0.4145, 0.4149, 0.415 , 0.4152, 0.4152, 0.4152,
                0.4152, 0.4153, 0.4152, 0.4152, 0.4155, 0.4156, 0.4155, 0.4156,
                0.4155, 0.4155, 0.4156, 0.4154, 0.416 , 0.4161, 0.4161, 0.4159,
                0.4159, 0.416 , 0.4159, 0.416 , 0.416 , 0.416 , 0.4161, 0.4161,
                0.4163, 0.4163, 0.4163, 0.4165, 0.4165, 0.4165, 0.4166, 0.4166,
                0.417 , 0.4168, 0.4167, 0.4171, 0.417 , 0.4172, 0.4174, 0.4174,
                0.4175, 0.4175, 0.4173, 0.4174, 0.4175, 0.4173, 0.4172, 0.4177,
                0.4176]

tc64_lr01_l10 = [0.3607, 0.3766, 0.3785, 0.3763, 0.3763, 0.3799, 0.3832, 0.3835,
                 0.3852, 0.3857, 0.3884, 0.3904, 0.3928, 0.3947, 0.3966, 0.3987,
                 0.4007, 0.402 , 0.4032, 0.4043, 0.4065, 0.4078, 0.409 , 0.4103,
                 0.4125, 0.4126, 0.4131, 0.4131, 0.4136, 0.4152, 0.4159, 0.4171,
                 0.4178, 0.4187, 0.4198, 0.4208, 0.4209, 0.4216, 0.4215, 0.4223,
                 0.4227, 0.4231, 0.4234, 0.4241, 0.425 , 0.4251, 0.4252, 0.4251,
                 0.4255, 0.4259, 0.4267, 0.4271, 0.4272, 0.4276, 0.4285, 0.4284,
                 0.4286, 0.4291, 0.4296, 0.4299, 0.4298, 0.43  , 0.4302, 0.4305,
                 0.4311, 0.4309, 0.4311, 0.4314, 0.4321, 0.432 , 0.4323, 0.4322,
                 0.4332, 0.4335, 0.4341, 0.4342, 0.4341, 0.4345, 0.4348, 0.4352,
                 0.4351, 0.4356, 0.4362, 0.4364, 0.4367, 0.4373, 0.4374, 0.4372,
                 0.4377, 0.4385, 0.4388, 0.4392, 0.4392, 0.4399, 0.4404, 0.4405,
                 0.4409, 0.4409, 0.4411, 0.4414, 0.4415, 0.4418, 0.4422, 0.4421,
                 0.4423, 0.4426, 0.4426, 0.4429, 0.4429, 0.4427, 0.4426, 0.4429,
                 0.4429, 0.4431, 0.443 , 0.4431, 0.443 , 0.443 , 0.4433, 0.4437,
                 0.4432, 0.4436, 0.4444, 0.4445, 0.445 , 0.445 , 0.4449, 0.4449,
                 0.4453, 0.4457, 0.446 , 0.4458, 0.4462, 0.4462, 0.4464, 0.4466,
                 0.4466, 0.4469, 0.4472, 0.4473, 0.4474, 0.4477, 0.4482, 0.4482,
                 0.4484, 0.4485, 0.4487, 0.4488, 0.4488, 0.4488, 0.4488, 0.4489,
                 0.4493, 0.4493, 0.4496, 0.4499, 0.45  , 0.4499, 0.4497, 0.4501,
                 0.4505, 0.4506, 0.4506, 0.4509, 0.4507, 0.4508, 0.4509, 0.4509,
                 0.4509, 0.4509, 0.4517, 0.4514, 0.4518, 0.4517, 0.4518, 0.4519,
                 0.4519, 0.4518, 0.4521, 0.4523, 0.4524, 0.4528, 0.4526, 0.4526,
                 0.453 , 0.453 , 0.453 , 0.453 , 0.453 , 0.453 , 0.4529, 0.4529,
                 0.4527, 0.453 , 0.4531, 0.4529, 0.4525, 0.4524, 0.4522, 0.4523,
                 0.4524, 0.4524, 0.4527, 0.4523, 0.4528, 0.4529, 0.4528, 0.4532,
                 0.4529, 0.453 , 0.4531, 0.4536, 0.454 , 0.4537, 0.4537, 0.4538,
                 0.4539, 0.4539, 0.4537, 0.4537, 0.4535, 0.4535, 0.4539, 0.454 ,
                 0.4537, 0.4536, 0.4538, 0.4541, 0.4541, 0.4541, 0.454 , 0.4539,
                 0.4535, 0.4534, 0.4537, 0.4537, 0.4541, 0.4542, 0.4542, 0.454 ,
                 0.454 , 0.4539, 0.4537, 0.4537, 0.4541, 0.454 , 0.4541, 0.4543,
                 0.4541,  0.453]

tc64_lr01_l100 = [0.3752, 0.4029, 0.4048, 0.4042, 0.4041, 0.4063, 0.4064, 0.407,
                  0.4091, 0.4099, 0.4115, 0.4128, 0.4145, 0.416 , 0.4178, 0.4194,
                  0.4211, 0.422 , 0.4242, 0.425 , 0.4261, 0.4276, 0.4293, 0.4304,
                  0.431 , 0.4323, 0.433 , 0.4342, 0.4341, 0.4353, 0.4353, 0.436 ,
                  0.4369, 0.437 , 0.4384, 0.4381, 0.4388, 0.4403, 0.4406, 0.4403,
                  0.441 , 0.4414, 0.4422, 0.4428, 0.4434, 0.444 , 0.4442, 0.4451,
                  0.4453, 0.4462, 0.4466, 0.4469, 0.4472, 0.4476, 0.4476, 0.4485,
                  0.4485, 0.4487, 0.4492, 0.4496, 0.4501, 0.4503, 0.4507, 0.4505,
                  0.4511, 0.4507, 0.4507, 0.4509, 0.4516, 0.4521, 0.4522, 0.4525,
                  0.4529, 0.4523, 0.4529, 0.4531, 0.4535, 0.4537, 0.4539, 0.4537,
                  0.4538, 0.4544, 0.4544, 0.4549, 0.4547, 0.4545, 0.455 , 0.4552,
                  0.455 , 0.4549, 0.4555, 0.4556, 0.4553, 0.4553, 0.4552, 0.4554,
                  0.4547, 0.4547, 0.4549, 0.4549, 0.4551, 0.4552, 0.4556, 0.4555,
                  0.4558, 0.4561, 0.4562, 0.4565, 0.4563, 0.4563, 0.4563, 0.4559,
                  0.4564, 0.4562, 0.4566, 0.4564, 0.4564, 0.4563, 0.4563, 0.4561,
                  0.4564, 0.4566, 0.457 , 0.4572, 0.4575, 0.4572, 0.4574, 0.4573,
                  0.457 , 0.4573, 0.4577, 0.4577, 0.4574, 0.4571, 0.457 , 0.4574,
                  0.4573, 0.4575, 0.4571, 0.4574, 0.4567, 0.457 , 0.457 , 0.4571,
                  0.4575, 0.4576, 0.4578, 0.4579, 0.4579, 0.4582, 0.4583, 0.4579,
                  0.4579, 0.4579, 0.4582, 0.4581, 0.458 , 0.4582, 0.458 , 0.4582,
                  0.4581, 0.458 , 0.4587, 0.4587, 0.4584, 0.4585, 0.4586, 0.4585,
                  0.4588, 0.459 , 0.4594, 0.4588, 0.4588, 0.4592, 0.4588, 0.4587,
                  0.4588, 0.459 , 0.4591, 0.4592, 0.4592, 0.4593, 0.4592, 0.4587,
                  0.458 , 0.4586, 0.4583, 0.4586, 0.4586, 0.4588, 0.4589, 0.4589,
                  0.4585, 0.4587, 0.4589, 0.4593]

tc64_lr01_l1000 = [0.3793, 0.4063, 0.4081, 0.4104, 0.4134, 0.415 , 0.4172, 0.4183,
                   0.42  , 0.4216, 0.4241, 0.4254, 0.4264, 0.4276, 0.4287, 0.4304,
                   0.431 , 0.4312, 0.431 , 0.4312, 0.4328, 0.4343, 0.4343, 0.4349,
                   0.4345, 0.4359, 0.4358, 0.4372, 0.438 , 0.4396, 0.4412, 0.4414,
                   0.4412, 0.4406, 0.4418, 0.4429, 0.4432, 0.4433, 0.4442, 0.444 ,
                   0.4449, 0.4455, 0.4454, 0.4457, 0.4458, 0.4464, 0.4468, 0.4475,
                   0.4476, 0.4478, 0.4482, 0.4484, 0.4484, 0.4482, 0.4486, 0.4492,
                   0.4497, 0.4495, 0.4497, 0.45  , 0.4498, 0.4503, 0.4503, 0.4509,
                   0.451 , 0.4513, 0.4519, 0.451 , 0.4505, 0.4514, 0.4518, 0.4522,
                   0.4524, 0.4515, 0.4515, 0.4522, 0.4518, 0.4515, 0.4514, 0.4519,
                   0.4528, 0.4529, 0.4529, 0.4535, 0.4533, 0.4536, 0.4538, 0.4539,
                   0.4538, 0.4533, 0.4537, 0.4529, 0.4533, 0.4535, 0.4542, 0.454 ,
                   0.4539, 0.4542, 0.454 , 0.4541, 0.4544, 0.4548, 0.455 , 0.4546,
                   0.4541, 0.4546, 0.4545, 0.4553, 0.4547, 0.4547, 0.4538, 0.4536,
                   0.4534, 0.4538, 0.454 , 0.4542, 0.4545, 0.4542, 0.454 , 0.4542,
                   0.4543, 0.4547, 0.4547, 0.4543, 0.454 , 0.4543, 0.4538, 0.4534,
                   0.4534, 0.4531, 0.4537, 0.453 , 0.4529, 0.4536]

tc256_lr01_l1 = []

tc256_lr01_l10 = []

tc256_lr01_l100 = []

tc256_lr01_l1000 = []

# Plot learning curves
fig = plt.figure()
plt.plot(list(range(len(tc64_lr01_l1))), tc64_lr01_l1, color="black", ls='-', label=r'1 leaf')
plt.plot(list(range(len(tc64_lr01_l10))), tc64_lr01_l10, color="blue", ls=':', label=r'10 leaf')
plt.plot(list(range(len(tc64_lr01_l100))), tc64_lr01_l100, color="red", ls='--', label=r'100 leaf')
plt.plot(list(range(len(tc64_lr01_l1000))), tc64_lr01_l1000, color="green", ls=':', label=r'1000 leaf')
plt.xlabel(r"Training iters (Tree)")
plt.ylabel(r"nDCG@10")
plt.legend(loc='upper left')
plt.xticks(list(range(0, 250, 20)))
plt.xlim(1,250)
fig.savefig('LambdaMART_64_vali')
plt.close(fig)

# Plot learning curves
# fig = plt.figure()
# plt.plot(iters, tc256_lr01_l1, color="black", ls='-', label=r'1 leaves')
# plt.plot(iters, tc256_lr01_l10, color="blue", ls=':', label=r'10 leaves')
# plt.plot(iters, tc256_lr01_l100, color="red", ls='--', label=r'100 leaves')
# plt.plot(iters, tc256_lr01_l1000, color="green", ls=':', label=r'1000 leaves')
# plt.xlabel(r"Training iters (Tress)")
# plt.ylabel(r"nDCG@10")
# plt.legend(loc='lower left')
# plt.xticks(list(range(0, 21, 5)))
# plt.xlim(1,250)
# fig.savefig('LambdaMART_256_training')
# plt.close(fig)
